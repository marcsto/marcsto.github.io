<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Probabilistic Chess - Marc.ai</title><meta name="description" content="Introducing Probabilistic Chess An exciting new variant of chess that you can play at marc.ai/probchess. For example, if you attempt to move a pawn from e2 to e4 and e4 has a 60% success probability, you will see a dice roll animation. The dice will&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://marc.ai/probabilistic-chess.html"><link rel="alternate" type="application/atom+xml" href="https://marc.ai/feed.xml"><link rel="alternate" type="application/json" href="https://marc.ai/feed.json"><meta property="og:title" content="Probabilistic Chess"><meta property="og:image" content="https://marc.ai/media/posts/10/android-chrome-192x192.png"><meta property="og:image:width" content="192"><meta property="og:image:height" content="192"><meta property="og:site_name" content="Marc.ai"><meta property="og:description" content="Introducing Probabilistic Chess An exciting new variant of chess that you can play at marc.ai/probchess. For example, if you attempt to move a pawn from e2 to e4 and e4 has a 60% success probability, you will see a dice roll animation. The dice will&hellip;"><meta property="og:url" content="https://marc.ai/probabilistic-chess.html"><meta property="og:type" content="article"><link rel="shortcut icon" href="https://marc.ai/media/website/favicon.ico" type="image/x-icon"><link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin><style>h1,h2,h3,h4,h5,h6,.btn,[type=button],[type=submit],button,.navbar .navbar__menu li,.navbar_mobile_sidebar .navbar__menu li,.feed__author,.post__tag,.post__share>a span,.post__nav-link>span,.footer{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"}body,h1,.h1,blockquote,.search__input,.author__name,.author__info>p,.feed__item h2,.post__nav-link{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"}</style><link rel="stylesheet" href="https://marc.ai/assets/css/style.css?v=98dca2fac1704ef2da05dc8b840a518c"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://marc.ai/probabilistic-chess.html"},"headline":"Probabilistic Chess","datePublished":"2024-07-06T18:30","dateModified":"2024-07-06T18:51","image":{"@type":"ImageObject","url":"https://marc.ai/media/posts/10/android-chrome-192x192.png","height":192,"width":192},"description":"Introducing Probabilistic Chess An exciting new variant of chess that you can play at marc.ai/probchess. For example, if you attempt to move a pawn from e2 to e4 and e4 has a 60% success probability, you will see a dice roll animation. The dice will&hellip;","author":{"@type":"Person","name":"Marc Stogaitis","url":"https://marc.ai/authors/marc-stogaitis/"},"publisher":{"@type":"Organization","name":"Marc Stogaitis"}}</script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-166034582-1"></script><script>window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-166034582-1');</script></head><body><div class="site-container"><header class="top" id="js-header"><a class="logo" href="https://marc.ai/">Marc.ai</a><nav class="navbar js-navbar"><button class="navbar__toggle js-toggle" aria-label="Menu" aria-haspopup="true" aria-expanded="false"><span class="navbar__toggle-box"><span class="navbar__toggle-inner">Menu</span></span></button><ul class="navbar__menu"><li><a href="https://marc.ai/about-marc-stogaitis.html" target="_self">About</a></li><li><a href="https://marc.ai/probchess/" title="Probabilistic Chess" target="_self">Probabilistic-Chess</a></li><li><a href="https://marc.ai/punch-corona/" target="_self">PunchCorona</a></li><li><a href="https://DontTouchFace.com" target="_self">DontTouchFace</a></li><li><a href="https://marc.ai/celebrity-look-alike-for-android.html" target="_self">Celebrity Look-alike</a></li><li><a href="https://marc.ai/doodlecast-for-chromecast-android-app.html" target="_self">Doodlecast</a></li><li><a href="https://marc.ai/piclearn-helps-you-learn-chinese-and-french.html" target="_self">PicLearn</a></li><li><a href="http://www.gmote.org" target="_self">Gmote</a></li><li><a href="https://marc.ai/feed.xml" target="_self">RSS</a></li></ul></nav></header><main><article class="post"><div class="hero"><figure class="hero__image hero__image--overlay"><img src="https://marc.ai/media/posts/10/android-chrome-192x192.png" srcset="https://marc.ai/media/posts/10/responsive/android-chrome-192x192-xs.png 300w, https://marc.ai/media/posts/10/responsive/android-chrome-192x192-sm.png 480w, https://marc.ai/media/posts/10/responsive/android-chrome-192x192-md.png 768w, https://marc.ai/media/posts/10/responsive/android-chrome-192x192-lg.png 1024w, https://marc.ai/media/posts/10/responsive/android-chrome-192x192-xl.png 1360w, https://marc.ai/media/posts/10/responsive/android-chrome-192x192-2xl.png 1600w" sizes="(max-width: 1600px) 100vw, 1600px" loading="eager" height="192" width="192" alt="Probabilistic Chess"><figcaption>Probabilistic Chess Marc Stogaitis</figcaption></figure><header class="hero__content"><div class="wrapper"><h1>Probabilistic Chess</h1><div class="post__meta post__meta--author"><img src="https://marc.ai/media/website/mstogaitis.jpg" loading="eager" alt="Marc Stogaitis" class="post__author-thumb"> <a href="https://marc.ai/authors/marc-stogaitis/" class="feed__author invert">Marc Stogaitis</a></div></div></header></div><div class="wrapper post__entry"><h3>Introducing Probabilistic Chess</h3><p>An exciting new variant of chess that you can play at <a rel="noreferrer" target="_new" href="https://marc.ai/probchess"></a><a href="https://marc.ai/probchess" target="_new">marc.ai/probchess</a>.</p><h3>The Rules:</h3><ul><li><strong>Movement Probability</strong>: Each square on the board has a probability of successfully moving to it.</li><li><strong>Dice Roll</strong>: A happy-face dice roll means the move was successful.</li><li><strong>Winning Condition</strong>: You win by capturing the opponent's king.</li></ul><p>For example, if you attempt to move a pawn from e2 to e4 and e4 has a 60% success probability, you will see a dice roll animation. The dice will have a 60% chance of landing on a happy face and a 40% chance of landing on a sad face. If it lands on a happy face, the move succeeds. If it lands on a sad face, the move fails, the pawn returns to e2, and it's now the opponent’s turn.</p><p><video loading="lazy" width="688" height="531" autoplay="autoplay" muted="" loop="loop"><source src="https://marc.ai/assets/video/probabilistic-chess-video.mp4" type="video/mp4">Your browser does not support the video tag.</video></p><h3>Capturing the King</h3><p>An intriguing aspect of probabilistic chess is that <strong>checkmate no longer guarantees a win</strong>. In traditional chess, checkmate ends the game because it ensures the king will be captured. However, in probabilistic chess, capturing the king is not guaranteed. The king may be on a low probability square, making it challenging to capture. Additionally, the opponent may capture your king while you attempt to capture theirs, or the king might escape while you try to capture it. Therefore, thinking probabilistically and strategizing based on square probabilities is crucial.</p><p>Key points:</p><ul><li><strong>Checkmate</strong>: Checkmate does not win the game; capturing the king does.</li><li><strong>Moves During Check</strong>: You can make moves while your king is in check.</li><li><strong>Self-Check</strong>: You can make moves that put your king in check.</li></ul><p>This dynamic adds a fun twist to chess. Traditional chess often ends with a checkmate without ever capturing the king, but now, you get the satisfaction of an actual capture (or the frustration of a failed attempt).</p><h3>All Games End in a Win</h3><p>Due to the probabilistic nature of the board, traditional draw scenarios do not apply. Stalemates are impossible because the king can always attempt to escape, and the opponent might fail to capture it. Even with only two kings left, they can capture each other by moving to low probability squares. If one king tries to capture and fails, the other can succeed.</p><p>This rule change is similar to modifications in professional sports to eliminate draws, like hockey's overtime and shootouts or the NBA's continual overtimes until a winner is declared.</p><p>Always having a game end in a win is enjoyable. However, it may need adjustment if players can prolong the game indefinitely, such as with two kings avoiding each other. A potential solution could be a "shrinking board" algorithm where the board gradually gets smaller, forcing the kings toward each other.</p><p>Feedback on handling these scenarios or reintroducing draws is welcome.</p><h3>Variants</h3><p>While I like the simplicity of the default rules, we're testing out different variants of the game based on our experience playing it. You can try these out in the 'Variants' drop-down section of the site.</p><ul><li><strong>King Moves Always Succeed</strong>: King moves are always successful.</li><li><strong>King Moves Double Success Rate</strong>: King moves have double the success rate of the destination square.</li></ul><p>These 'king move' variants were introduced to reduce the chances of winning simply by constantly attacking the king and getting a lucky dice roll as it can be frustrating to lose when far ahead simply because the opponent YOLO's their pieces at your king. There may be a way to play to lower the odds of this, or maybe these variants are needed. We'd love some feedback on if a variant should become part of the core game mechanics.</p><h3>Implementation Details</h3><h4>Board Probabilities Setup</h4><ul><li><strong>Random Initialization</strong>: Probabilities are randomly set at the start of each game.</li><li><strong>King Square</strong>: Starts with a probability of at least 10%. This lowers the chances of having the king start on an almost uncapturable square.</li><li><strong>Minimum Probability</strong>: 2% for any square.</li><li><strong>Maximum Probability</strong>: 99% for any square.</li></ul><p><em>Note: These rules may change as the game evolves.</em></p><h4>Client-Side Implementation</h4><p>The game is implemented purely in HTML, CSS, and JavaScript to run without a server. This approach ensures fast loading times and low server costs but poses challenges for creating a performant chess AI.</p><h3>Chess AI</h3><p>Creating a chess AI for Probabilistic Chess is a fun project. The AI combines chess.js and stockfish.js.</p><h4>Stockfish AI (Moderate)</h4><p>This AI uses Stockfish to determine the best move. While Stockfish is a strong chess program, it does not account for probabilities, resulting in occasional poor decisions, like repeatedly attempting moves to low probability squares.</p><h4>Alpha-Beta with Expectation-Maximization (Hard and Expert)</h4><p>This is the primary AI for the game, incorporating an alpha-beta search algorithm and the expectation-maximization algorithm to consider board probabilities. It calculates:</p><ul><li><strong>Move Success Score: </strong>The score if the move succeeds, by recursively calling alpha-beta and calling stockfish's eval method once the desired depth is reached.</li><li><strong>Move Failed Score</strong>: The score if the move fails and it’s the opponent’s turn.</li><li><strong>Expected Value</strong>: <code>moveSuccessScore * probOfMoveSucceeding + moveFailedScore * (1 - probOfMoveSucceeding)</code></li></ul><p>This runs recursively up to a certain depth, using the traditional chess alpha-beta search algorithm. When it reaches the desired depth, it asks Stockfish to provide an eval for the position.</p><p>This seems to work pretty well and results in a decently strong opponent that takes square probabilities into account.</p><p>Additional details:</p><ul><li><strong>Performance</strong>: Running a large search tree in JavaScript is slow, limiting the search depth.</li><li><strong>Multi-threading</strong>: I'm considering a newer, multi-threaded version of Stockfish's JavaScript engine, though it requires setting CORS headers which my host doesn't support. I'm going to try one of the documented workarounds.</li><li><strong>AI vs. AI</strong>: You can set AIs for both black and white to watch them play against each other.</li><li><strong>Endgame Issues</strong>: There can be problems when the AI believes the game is over (e.g. it’s way ahead, or the game is a draw). At this point, most moves have an identical score so it doesn’t quite know what to do. I’m looking at improving this.</li></ul><h4>Monte Carlo Simulation</h4><p>This earlier algorithm ran several simulations using Stockfish's top moves to determine the best move based on average scores. It worked decently but was slow and is no longer actively developed.</p><h3>Conclusion</h3><p>Developing Probabilistic Chess has been a lot of fun. My dad and I have spent over 30 years working on programming projects together and a big part of that was focused on ML and applying it to chess so building a new variant of chess together has been great.</p><h3>Credits</h3><ul><li><strong>Created by</strong>: Marc Stogaitis and Guy Stogaitis</li><li><strong>Special Thanks</strong>: Ghislaine Stogaitis and Mimi Sun</li><li><strong>Inspired by</strong>: Cameron Sun’s probabilistic tic-tac-toe</li><li><strong>Libraries Used</strong>: chess.js, stockfish.js</li><li><strong>Try out <a href="https://marc.ai/probchess">probabilistic chess here</a>.</strong></li></ul><h3>Contact</h3><ul><li><strong>Twitter</strong>: <a href="https://x.com/marcsto" title="Marc Stogaitis on X.com (Twitter)" target="_new">@marcsto</a></li><li><strong>Email</strong>: marcsto@gmail.com</li></ul><p>Please <a href="https://twitter.com/intent/tweet?text=Check%20out%20Probabilistic%20Chess!%20@marcsto&amp;url=https://marc.ai/probchess">share Probabilistic Chess</a> with your friends!</p><figure class="post__image"><img loading="lazy" src="https://marc.ai/media/posts/10/probabilistic-chess-screenshot.PNG" alt="Probabilistic Chess Screenshot" width="900" height="730" sizes="(max-width: 48em) 100vw, 768px" srcset="https://marc.ai/media/posts/10/responsive/probabilistic-chess-screenshot-xs.PNG 300w, https://marc.ai/media/posts/10/responsive/probabilistic-chess-screenshot-sm.PNG 480w, https://marc.ai/media/posts/10/responsive/probabilistic-chess-screenshot-md.PNG 768w, https://marc.ai/media/posts/10/responsive/probabilistic-chess-screenshot-lg.PNG 1024w, https://marc.ai/media/posts/10/responsive/probabilistic-chess-screenshot-xl.PNG 1360w, https://marc.ai/media/posts/10/responsive/probabilistic-chess-screenshot-2xl.PNG 1600w"></figure></div><footer class="wrapper post__footer"><div class="post__share"><a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fmarc.ai%2Fprobabilistic-chess.html" class="js-share facebook" rel="nofollow noopener noreferrer"><svg class="icon" aria-hidden="true" focusable="false"><use xlink:href="https://marc.ai/assets/svg/svg-map.svg#facebook"/></svg> <span>Facebook</span> </a><a href="https://twitter.com/share?url=https%3A%2F%2Fmarc.ai%2Fprobabilistic-chess.html&amp;via=marcsto&amp;text=Probabilistic%20Chess" class="js-share twitter" rel="nofollow noopener noreferrer"><svg class="icon" aria-hidden="true" focusable="false"><use xlink:href="https://marc.ai/assets/svg/svg-map.svg#twitter"/></svg> <span>Twitter</span> </a><a href="https://pinterest.com/pin/create/button/?url=https%3A%2F%2Fmarc.ai%2Fprobabilistic-chess.html&amp;media=https%3A%2F%2Fmarc.ai%2Fmedia%2Fposts%2F10%2Fandroid-chrome-192x192.png&amp;description=Probabilistic%20Chess" class="js-share pinterest" rel="nofollow noopener noreferrer"><svg class="icon" aria-hidden="true" focusable="false"><use xlink:href="https://marc.ai/assets/svg/svg-map.svg#pinterest"/></svg> <span>Pinterest</span> </a><a href="https://wa.me/?text=Probabilistic%20Chess https%3A%2F%2Fmarc.ai%2Fprobabilistic-chess.html" class="js-share whatsapp" rel="nofollow noopener noreferrer"><svg class="icon" aria-hidden="true" focusable="false"><use xlink:href="https://marc.ai/assets/svg/svg-map.svg#whatsapp"/></svg> <span>WhatsApp</span></a></div><div class="post__bio bio"><img class="bio__avatar" src="https://marc.ai/media/website/mstogaitis.jpg" loading="lazy" alt="Marc Stogaitis"><div class="bio__info"><h3 class="bio__name"><a href="https://marc.ai/authors/marc-stogaitis/" class="invert" rel="author">Marc Stogaitis</a></h3><p>I&#x27;m a Principal Software Engineer at Google. On weekends, I like to work on personal projects for fun and to learn new things which is what this site is all about.</p></div></div></footer></article><nav class="post__nav"><div class="post__nav-inner"><div class="post__nav-prev"><svg width="1.041em" height="0.416em" aria-hidden="true"><use xlink:href="https://marc.ai/assets/svg/svg-map.svg#arrow-prev"/></svg> <a href="https://marc.ai/full-research-papers-on-youtube.html" class="invert post__nav-link" rel="prev"><span>Previous</span> Full Research Papers on Youtube</a></div></div></nav></main><footer class="footer"><div class="footer__social"><a href="https://twitter.com/marcsto" aria-label="Twitter"><svg><use xlink:href="https://marc.ai/assets/svg/svg-map.svg#twitter"/></svg> </a><a href="https://www.linkedin.com/in/marc-stogaitis-81379224" aria-label="LinkedIn"><svg><use xlink:href="https://marc.ai/assets/svg/svg-map.svg#linkedin"/></svg></a></div><div class="footer__copyright"><p>Powered by <a href="https://getpublii.com" target="_blank" rel="nofollow noopener">Publii Static CMS</a></p></div><button class="footer__bttop js-footer__bttop" aria-label="Back to top"><svg><title>Back to top</title><use xlink:href="https://marc.ai/assets/svg/svg-map.svg#toparrow"/></svg></button></footer></div><script>window.publiiThemeMenuConfig = {    
        mobileMenuMode: 'sidebar',
        animationSpeed: 300,
        submenuWidth: 'auto',
        doubleClickTime: 500,
        mobileMenuExpandableSubmenus: true, 
        relatedContainerForOverlayMenuSelector: '.top',
   };</script><script defer="defer" src="https://marc.ai/assets/js/scripts.min.js?v=f56b13ba141d95ea2a0b7aab75ca9528"></script><script>var images = document.querySelectorAll('img[loading]');

        for (var i = 0; i < images.length; i++) {
            if (images[i].complete) {
                images[i].classList.add('is-loaded');
            } else {
                images[i].addEventListener('load', function () {
                    this.classList.add('is-loaded');
                }, false);
            }
        }</script></body></html>